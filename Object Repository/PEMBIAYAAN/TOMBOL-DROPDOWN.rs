<?xml version="1.0" encoding="UTF-8"?>
<WebElementEntity>
   <description></description>
   <name>TOMBOL-DROPDOWN</name>
   <tag></tag>
   <elementGuidId>7b7d9e34-c35d-45a0-95f2-b738814d3a24</elementGuidId>
   <selectorCollection>
      <entry>
         <key>XPATH</key>
         <value>//*/text()[normalize-space(.)='']/parent::*</value>
      </entry>
   </selectorCollection>
   <selectorMethod>XPATH</selectorMethod>
   <useRalativeImagePath>false</useRalativeImagePath>
   <webElementProperties>
      <isSelected>false</isSelected>
      <matchCondition>equals</matchCondition>
      <name>tag</name>
      <type>Main</type>
      <value>html</value>
   </webElementProperties>
   <webElementProperties>
      <isSelected>false</isSelected>
      <matchCondition>equals</matchCondition>
      <name>lang</name>
      <type>Main</type>
      <value>en</value>
   </webElementProperties>
   <webElementProperties>
      <isSelected>true</isSelected>
      <matchCondition>equals</matchCondition>
      <name>text</name>
      <type>Main</type>
      <value>
    
    Microsite
    
    
    
    
    
    
        addActive = function(element){
            $(element).addClass(&quot;active&quot;);
        }

        removeActive = function(element){
            $(element).removeClass(&quot;active&quot;);
        }

        next_step = function(urut){
            set_active_tab('#step-'+urut);
            addActive('#tab-'+urut);
        }

        prev_step = function(urut){
            var remove_urut = parseInt(urut)+1;
            set_active_tab('#step-'+urut);
            removeActive('#tab-'+remove_urut);
        }

        set_active_tab = function(id){
            $(&quot;.wizard&quot;).hide(), $(id).show()
        }
    
#katalon{font-family:monospace;font-size:13px;background-color:rgba(0,0,0,.7);position:fixed;top:0;left:0;right:0;display:block;z-index:999999999;line-height: normal} #katalon div{padding:0;margin:0;color:#fff;} #katalon kbd{display:inline-block;padding:3px 5px;font:13px Consolas,&quot;Liberation Mono&quot;,Menlo,Courier,monospace;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb;font-weight: bold} div#katalon-spy_elementInfoDiv {color: lightblue; padding: 0px 5px 5px} div#katalon-spy_instructionDiv {padding: 5px 5px 2.5px}


    
        
			
                
				
            
            
                
            
            
                
                    
                        
                            Simulasi (current)
                        
                        
                            Kredit Kendaraan Bermotor
                            Pembiayaan Multiguna
                        
                    
                    
                        Informasi Produk
                    
                
            
        
    	
		
			
			Simulasi Pembiayaan
			
		
	
	
		
			
				
					
						
							
								1
								Simulasi Kredit
							
							
								2
								Rincian Agunan
							
							
								3
								Data Diri
							
							
								4
								Ringakasan Pengajuan
							
						
					
				
			
		
		
			
				
                                                                                    
				
					
						
							
							Persyaratan Pengajuan Pembiayaan
						
						
							Lihat
						
					
				
				
					
						
							Informasi Agunan
							
								Apakah kamu memiliki usaha ? *
								
									
									Ya, saya memiliki usaha
								
								
									
									Tidak memiliki usaha
								
								
							
							
																
									Jenis Agunan *
									--- Pilih Jenis Agunan ---BPKB MotorBPKB MobilSertifikat Hak Milik (SHM)Tanpa Agunan
									
										*) silahkan membaca Persyaratan Pengajuan Pembiayaan	
									
															
							
							
								
									Tahun Pembuatan  *
									--- Pilih Tahun Pembuatan ---202020192018201720162015201420132012201120102009200820072006
								
							
							
								
									Jumlah Pinjaman *
									
									
								
							 
							
								
									Tenor  *
									
									
								
							
						
					
				
				
					
						
							Kalkulasi
							
								Angsuran Per Bulan
								Rp 0
							
							
								Rincian 
								
									
										
											
												
													
														Uang Pokok
														Rp Infinity
													
													
														Sewa Modal
														Rp 70,000
													
												
											
										
									
								
							
							
								
									Rincian simulasi diatas bersifat estimasi dan tidak mengikat dan dapat berubah sewaktu-waktu mengikuti kebijakan yang berlaku
								
							
							
									Selanjutnya
							
						
					
				
				
			
			
				
                       
				
					
						
							Informasi Agunan
							
								
									Merek Kendaraan *
									
								
								
									Tipe Kendaraan *
									
								
							
							
								No Sertifikat *
								
							
							
								
									Nama Usaha *
									
								
								
									Lama Usaha *
									
								
								
									Alamat Usaha *
									
								
							
						
					
				
				
					
						
							Lokasi Outlet
							
								Provinsi *
								
									Pilih Provinsi
																		
										Bali
																		
										Bangka Belitung
																		
										Banten
																		
										Bengkulu
																		
										DI Yogyakarta
																		
										DKI Jakarta
																		
										Gorontalo
																		
										Jambi
																		
										Jawa Barat
																		
										Jawa Tengah
																		
										Jawa Timur
																		
										Kalimantan Barat
																		
										Kalimantan Selatan
																		
										Kalimantan Tengah
																		
										Kalimantan Timur
																		
										Kepulauan Riau
																		
										Lampung
																		
										Maluku
																		
										Maluku Utara
																		
										Nanggroe Aceh Darussalam (NAD)
																		
										Nusa Tenggara Barat (NTB)
																		
										Nusa Tenggara Timur (NTT)
																		
										Papua
																		
										Papua Barat
																		
										Riau
																		
										Sulawesi Barat
																		
										Sulawesi Selatan
																		
										Sulawesi Tengah
																		
										Sulawesi Tenggara
																		
										Sulawesi Utara
																		
										Sumatera Barat
																		
										Sumatera Selatan
																		
										Sumatera Utara
																	
							
							
								Kabupaten / Kota *
								
									Pilih Kota / Kabupaten
								
							
							
								Kecamatan *
								
									Pilih Kecamatan
								
							
							
								Outlet Pegadaian *
								
									Pilih Outlet
								
							
							
									Sebelumnya
									Selanjutnya
							
						
					
				
				
			
			
				
                                                          
				
					
						
							Isi Data Diri
							
								Nama Sesuai KTP *
								
							
							
								Nomor KTP *
								
							
							
								Tanggal Lahir *
								event
							
							
								Nomor Handpone *
								 
							
							
								Email Opsional
								
							
							
									Sebelumnya
									Selanjutnya
							
						
					
				
			
			
			
				
                                                     
				
				
					
						Detail Pengajuan Pembiayaan
						
							
								Jenis Agunan
								SHM
							
							
								Jumlah Pinjaman
								Rp 7,000,000
							
							
								Tenor
								
							
							
								Angsuran Per Bulan
								Rp 0
							
							
								Outlet Pengajuan
								
							
						
						
						Data Diri
						
							
								Nama
								
							
							
								Nomor Handphone
								
							
							
								Email
								
							
						
						
						
							
								
								
									Saya telah membaca Syarat dan Ketentuan yang berlaku serta mengakui bahwa data yang tertera di halaman ini adalah benar.
								
							
						
						
							Sebelumnya
							Ajukan Pembiayaan
						
					
				
			
		
				  
		
			
				
					
						
							
							
						
						Pengajuan Pembiayaan Berhasil
						Kami akan menghubungi kamu dalam waktu 3 hari kerja.
						
						
						
						Detail Pengajuan Kredit
						
							
								Nomor Pengajuan
								
							
							
								Jenis Agunan
								SHM
							
							
								Jumlah Pinjaman
								Rp 7,000,000
							
							
								Tenor
								
							
							
								Angsuran Per Bulan
								Rp 0
							
							
								Outlet Pengajuan
								
							
						
						
						Status pengajuan setelah diterima dapat dilihat di Pegadaian Digital 
						
							
								Daftar Akun Pegadaian Digital
							
							
								Sudah punya akun? Masuk
							
						
					
				
			
      	
		
	

  
	
		
			
				
					Persyaratan
					
					Ã—
					
				
				
						Untuk Karyawan
						
						Karyawan tetap suatu instansi pemerintahan atau swasta. Minimal telah berkerja selama 2 tahun.
						Melampirkan kelengkapan fotokopi:
							
							KTP dan KK
							SK Pengakatan
							Kartu Pengenalan Karyawan/Karpeg
							Surat Nikah (jika ada)
							Slip Gaji 2 bulan terakhir
							
						
						Mengisi dan menandatangi formulir.
						
						
						Untuk Non-Karyawan
						Melampirkan kelengkapan fotokopi:
						
						KTP (Suami / Istri jika telah berkeluarga)
						Kartu Keluarga
						Surat Keterangan Usaha dengan menunjukan aslinya (Untuk Pengusaha Mikro/Kecil)
						Surat ijin praktek (untuk dokter dan bidan)
						SK Pengakatan Notaris (untuk Notaris)
						Rekening tagijan telpon/ listrik/ bukti pembayaran PBB yang terakhir
						
						
							Tanpa Agunan
							
							Memiliki penghasilan rutin mingguan.
							Memiliki kelompok/komunitas usaha beranggotakan minimal 10 orang.
							2.5% dari pinjaman akan dibukakan tabungan emas.
							Pinjaman awal maksimal Rp 2.000.000.
							
						
				
			
		
	


	var status_usaha, jenis_agunan, jenis_kendaraan, selectedThn, namaCustomer, noKtpCustomer,
      	ttlCustomer, noHpCustomer, emailCustomer, merkKendaraan, tipeKendaraan, kodeCabang,
		angsuran, produkCode, uang_pokok, sewa_modal, no_sertifikat, nama_usaha,
		lama_usaha, alamat_usaha, jumlah_pinjaman, tahun_pembuatan; 
	var tahunPembuatan = 0;
	var jumlahPinjaman = 0;
	var tenor = 1;

	$(document).ready(function() {
		$.ajaxSetup({
		data: {
			'microsite_csrf_token': '97b099be742b2c1c991184b1997ecaa1'
		}
		});

		$(document).ajaxStart(function() {
			$('html').block({
				message: null
			});
		});

		$(document).ajaxStop(function() {
			$('html').unblock();
		});

		$(&quot;.tahun-pembuatan&quot;).hide();
		$(&quot;.form-bpkb&quot;).hide();
		$(&quot;.form-shm&quot;).hide();
		$(&quot;.form-ta&quot;).hide();
		$(&quot;.persyaratanExpressLoan&quot;).hide();
		$(&quot;.warning-tanpa-agunan&quot;).hide();

		$('input:radio[name=&quot;status_usaha&quot;]').change(function() {
			$(&quot;.tahun-pembuatan&quot;).hide();
			$(&quot;.form-bpkb&quot;).hide();
			$(&quot;.form-shm&quot;).hide();
			$(&quot;.form-ta&quot;).hide();

			if ($(this).is(':checked')) {
				status_usaha = $(this).val();
			}

			set_jenis_agunan();
		});

		set_jenis_agunan = function(){
			var url = 'Pembiayaan/getJenisAgunan';
			$(&quot;select#jenis-agunan&quot;).empty();
			$(&quot;select#tahun-pembuatan&quot;).empty();
			$(&quot;select#tenor&quot;).empty();
			$(&quot;#jumlah-pinjaman&quot;).val(&quot;&quot;);
			$.ajax({
				url: url,
				data: {
					'status_usaha' : status_usaha
				},
				type: 'POST',
				dataType: 'json',
				mimeType: &quot;multipart/form-data&quot;,
				success: function(response) {
					// Remove options
					$('#jenis-agunan').find('option').not(':first').remove();
					$('#jenis-agunan').append('&lt;option value=&quot;&quot;>--- Pilih Jenis Agunan ---&lt;/option>');
					$('#tahun-pembuatan').append('&lt;option value=&quot;0&quot;>--- Pilih Tahun Pembuatan ---&lt;/option>');
					$('#tenor').append('&lt;option value=&quot;&quot;>--- Pilih Tenor ---&lt;/option>');
					// Add options
					$.each(response.data,function(index,value){
						$('#jenis-agunan').append('&lt;option value=&quot;'+value['value']+'&quot;>'+value['label']+'&lt;/option>');
					});
				}
			});
		}
		
		$(&quot;select#jenis-agunan&quot;).change(function() {
			var val = $(this).val().split(&quot; &quot;);
			jenis_agunan = val[0];
			jenis_kendaraan = val[1];

			var currentYear = (new Date).getFullYear();

			set_tahun_pembuatan();
			
			if(jenis_agunan == &quot;BPKB&quot;){
				$(&quot;.tahun-pembuatan&quot;).show();
				$(&quot;.form-bpkb&quot;).show();
				$(&quot;.form-shm&quot;).hide();
				$(&quot;.form-ta&quot;).hide();
				$(&quot;.persyaratanExpressLoan&quot;).hide();
				$(&quot;.warning-tanpa-agunan&quot;).hide();
					
			}else if(jenis_agunan == &quot;SHM&quot;){
				$(&quot;.tahun-pembuatan&quot;).hide();
				$(&quot;.form-bpkb&quot;).hide();
				$(&quot;.form-shm&quot;).show();
				$(&quot;.form-ta&quot;).hide();
				$(&quot;.persyaratanExpressLoan&quot;).hide();
				$(&quot;.warning-tanpa-agunan&quot;).hide();
			}else{
				$(&quot;.tahun-pembuatan&quot;).hide();
				$(&quot;.form-bpkb&quot;).hide();
				$(&quot;.form-shm&quot;).hide();
				$(&quot;.form-ta&quot;).show();
				$(&quot;.persyaratanExpressLoan&quot;).show();
				$(&quot;.warning-tanpa-agunan&quot;).show();
			}
			
		});

		set_tahun_pembuatan = function(){
			var url = 'Pembiayaan/setTahunPembuatan';
			$(&quot;select#tahun-pembuatan&quot;).empty();
			$(&quot;select#tenor&quot;).empty();
			$(&quot;#jumlah-pinjaman&quot;).val(&quot;&quot;);
			$.ajax({
				url: url,
				data: {
					'jenis_kendaraan' : jenis_kendaraan
				},
				type: 'POST',
				dataType: 'json',
				mimeType: &quot;multipart/form-data&quot;,
				success: function(response) {
					// Remove options
					$('#tahun-pembuatan').find('option').not(':first').remove();
					$('#tahun-pembuatan').append('&lt;option value=&quot;0&quot;>--- Pilih Tahun Pembuatan ---&lt;/option>');
					$('#tenor').append('&lt;option value=&quot;&quot;>--- Pilih Tenor ---&lt;/option>');
					// Add options
					$.each(response.data,function(index,value){
						$('#tahun-pembuatan').append('&lt;option value=&quot;'+value+'&quot;>'+value+'&lt;/option>');
					});
				}
			});
		}

		$(&quot;select#tahun-pembuatan&quot;).change(function() {
			selectedThn = $(this).val();
			$(&quot;select#tenor&quot;).empty();
			$(&quot;#jumlah-pinjaman&quot;).val(&quot;&quot;);
			$('#tenor').append('&lt;option value=&quot;&quot;>--- Pilih Tenor ---&lt;/option>');	
		});	
		
		
		set_tenor = function(){
			var url = 'Pembiayaan/setTenor';
			$(&quot;select#tenor&quot;).empty();
			$.ajax({
				url: url,
				data: {
					'kode_produk' : produkCode,
					'jenis_kendaraan' : jenis_kendaraan,
					'selectedThn' : selectedThn
				},
				type: 'POST',
				dataType: 'json',
				mimeType: &quot;multipart/form-data&quot;,
				success: function(response) {
					// Remove options
					$('#tenor').find('option').not(':first').remove();
					$('#tenor').append('&lt;option value=&quot;&quot;>--- Pilih Tenor ---&lt;/option>');
					// Add options
					$.each(response.data,function(index,value){
						$('#tenor').append('&lt;option value=&quot;'+value['value']+'&quot;>'+value['label']+'&lt;/option>');
					});
				}
			});
		}

		//===================================================================//
		// provinsi change
		$('#provinsi').change(function(){
			var provinsi = $(this).val();
			// AJAX request
			$.ajax({
				url: 'Pembiayaan/getKota',
				data: {
					'provinsi': provinsi
				},
				type: 'POST',
				dataType: 'json',
				success: function(response){
				// Remove options
				$('#cabang').find('option').not(':first').remove();
				$('#kecamatan').find('option').not(':first').remove();
				$('#kabupaten').find('option').not(':first').remove();

				// Add options
				$.each(response.data,function(index,kab_kota){
					$('#kabupaten').append('&lt;option value=&quot;'+kab_kota['kab_kota']+'&quot;>'+kab_kota['kab_kota']+'&lt;/option>');
				});
				}
			});
		});

		// kabupaten change
		$('#kabupaten').change(function(){
			var kabupaten = $(this).val();

			// AJAX request
			$.ajax({
				url:'Pembiayaan/getKecamatan',
				type: 'POST',
				data: {
					'kab_kota': kabupaten
				},
				dataType: 'json',
				success: function(response){
					// Remove options
					$('#cabang').find('option').not(':first').remove();
					$('#kecamatan').find('option').not(':first').remove();

					// Add options
					$.each(response.data,function(index,kecamatan){
						$('#kecamatan').append('&lt;option value=&quot;'+kecamatan['kecamatan']+'&quot;>'+kecamatan['kecamatan']+'&lt;/option>');
					});
				}
			});
		});

		// kecamatan change
		$('#kecamatan').change(function(){
			var kecamatan = $(this).val();

			// AJAX request
			$.ajax({
				url:'Pembiayaan/getCabang',
				type: 'POST',
				data: {
					'kecamatan': kecamatan
				},
				dataType: 'json',
				success: function(response){
					// Remove options
					$('#cabang').find('option').not(':first').remove();

					// Add options
					$.each(response.data,function(index,data){
					$('#cabang').append('&lt;option value=&quot;'+data['kode_cabang']+'|'+data['nama_cabang']+'|'+data['jalan']+'|'+data['telp']+'&quot;>'+data['nama_cabang']+'&lt;/option>');
					});
				}
			});
		});
		//==================================================================//

		//===========================TAMBAHAN VALIDASI =======================================//

		$('#btnAjukanPembiayaan').prop('disabled', true);

		//========== START VALIDASI FORM AND NEXT STEP =============================//
		// START TAB 1
		var form = $('#formInputTab1');
		$.validator.addMethod(&quot;minMaxJumlahPinjaman&quot;, function(value, element) {
			var valueParse = value.replace(/,/g, &quot;&quot;);
			var inputJumlahPinjaman = parseFloat(valueParse);
			var pesan='';

			if(jenis_agunan.includes(&quot;BPKB&quot;)){
				if(inputJumlahPinjaman &lt; 1000000 || inputJumlahPinjaman > 400000000){					
					return false;
				}
			} else if (jenis_agunan.includes(&quot;SHM&quot;)) {
				if(inputJumlahPinjaman &lt; 1000000 || inputJumlahPinjaman > 200000000){
					return false;
				}
			} else {
				if(inputJumlahPinjaman &lt; 1000000 || inputJumlahPinjaman > 2000000){
					return false;
				}
			}
			return true;
		}, &quot;Jumlah Pinjaman kurang dari ketentuan atau Jumlah Pinjaman lebih dari Ketentuan&quot;);

		form.validate({
			errorElement: 'div',
			errorClass: 'invalid-feedback',
			ignore: &quot;&quot;,
			focusInvalid: false,
			rules: {
				//######## SET VALIDATION FORM ID IN FORM (EDIT BELOW)########
				status_usaha: {
					required: !0
				},
				jenis_agunan: {
					required: !0
				},
				jumlah_pinjaman: {
					required: !0,
					minMaxJumlahPinjaman: true
				},
				tenor: {
					required: !0
				},
				tahun_pembuatan: {
					min:0
				}
				//######## END SET VALIDATION FORM ID IN FORM ########
			},
			invalidHandler: function(event, validator) {
				// App.scrollTo(error, -300);
				if (!validator.numberOfInvalids())
					return;

				$('html, body').animate({
					scrollTop: $(validator.errorList[0].element).offset().top
				}, 500);
			},
			errorPlacement: function(error, element) {
				element.is(&quot;:checkbox&quot;) ? error.insertAfter(element.closest(&quot;.md-checkbox-list, .md-checkbox-inline, .checkbox-list, .checkbox-inline&quot;)) : element.is(&quot;:radio&quot;) ? error.insertAfter(element.closest(&quot;.md-radio-list, .md-radio-inline, .radio-list,.radio-inline&quot;)) : error.insertAfter(element)
			},
			highlight: function(element) {
				if($(element).attr('type') == 'radio'){
					$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
						$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).show();
						$(this).removeClass(&quot;is-valid&quot;).addClass('is-invalid');
					});
				}else{
					$(element).closest('.form-control').removeClass(&quot;is-valid&quot;).addClass('is-invalid');
				}
			},
			success: function(label, element) {
				if($(element).attr('type') == 'radio'){
					$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
						$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).hide();
						$(this).removeClass('is-invalid').addClass('is-valid');
					});
				}else{
					$(element).closest('.form-control').removeClass('is-invalid').addClass('is-valid');
				}
			},
			submitHandler: function(form) {
				var formData = new FormData(form);
				// NEXT STEP TO TAB 2
				next_step('2');
			}
		});
		// END TAB 1

		// START TAB 2
		var form_2 = $('#formInputTab2');

		document.getElementById('jenis-agunan').onchange = function(){
			var agunanCondition = this.value;
			if(agunanCondition.includes(&quot;BPKB&quot;)){
				form_2.validate({
					errorElement: 'div',
					errorClass: 'invalid-feedback',
					ignore: &quot;&quot;,
					focusInvalid: false,
					rules: {
						//######## SET VALIDATION FORM ID IN FORM (EDIT BELOW)########
						merkKendaraan: {
							minlength: 3,
							required: !0
						},
						tipeKendaraan: {
							minlength: 3,
							required: !0
						},
						provinsi: {
							required: !0
						},
						kabupaten: {
							required: !0
						},
						kecamatan: {
							required: !0
						},
						cabang: {
							required: !0
						}

						//######## END SET VALIDATION FORM ID IN FORM ########
					},
					invalidHandler: function(event, validator) {
						// App.scrollTo(error, -300);
						if (!validator.numberOfInvalids())
							return;

						$('html, body').animate({
							scrollTop: $(validator.errorList[0].element).offset().top
						}, 500);
					},
					errorPlacement: function(error, element) {
						element.is(&quot;:checkbox&quot;) ? error.insertAfter(element.closest(&quot;.md-checkbox-list, .md-checkbox-inline, .checkbox-list, .checkbox-inline&quot;)) : element.is(&quot;:radio&quot;) ? error.insertAfter(element.closest(&quot;.md-radio-list, .md-radio-inline, .radio-list,.radio-inline&quot;)) : error.insertAfter(element)
					},
					highlight: function(element) {
						if($(element).attr('type') == 'radio'){
							$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
								$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).show();
								$(this).removeClass(&quot;is-valid&quot;).addClass('is-invalid');
							});
						}else{
							$(element).closest('.form-control').removeClass(&quot;is-valid&quot;).addClass('is-invalid');
						}
					},
					success: function(label, element) {
						if($(element).attr('type') == 'radio'){
							$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
								$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).hide();
								$(this).removeClass('is-invalid').addClass('is-valid');
							});
						}else{
							$(element).closest('.form-control').removeClass('is-invalid').addClass('is-valid');
						}
					},
					submitHandler: function(form_2) {
						var formData = new FormData(form_2);
						// NEXT STEP TO TAB 3
						next_step('3');
					}
				});
				// END TAB 2
			} else if(agunanCondition.includes(&quot;SHM&quot;)){
				form_2.validate({
					errorElement: 'div',
					errorClass: 'invalid-feedback',
					ignore: &quot;&quot;,
					focusInvalid: false,
					rules: {
						//######## SET VALIDATION FORM ID IN FORM (EDIT BELOW)########
						noSertifikat: {
							required: !0
						},
						provinsi: {
							required: !0
						},
						kabupaten: {
							required: !0
						},
						kecamatan: {
							required: !0
						},
						cabang: {
							required: !0
						}

						//######## END SET VALIDATION FORM ID IN FORM ########
					},
					invalidHandler: function(event, validator) {
						// App.scrollTo(error, -300);
						if (!validator.numberOfInvalids())
							return;

						$('html, body').animate({
							scrollTop: $(validator.errorList[0].element).offset().top
						}, 500);
					},
					errorPlacement: function(error, element) {
						element.is(&quot;:checkbox&quot;) ? error.insertAfter(element.closest(&quot;.md-checkbox-list, .md-checkbox-inline, .checkbox-list, .checkbox-inline&quot;)) : element.is(&quot;:radio&quot;) ? error.insertAfter(element.closest(&quot;.md-radio-list, .md-radio-inline, .radio-list,.radio-inline&quot;)) : error.insertAfter(element)
					},
					highlight: function(element) {
						if($(element).attr('type') == 'radio'){
							$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
								$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).show();
								$(this).removeClass(&quot;is-valid&quot;).addClass('is-invalid');
							});
						}else{
							$(element).closest('.form-control').removeClass(&quot;is-valid&quot;).addClass('is-invalid');
						}
					},
					success: function(label, element) {
						if($(element).attr('type') == 'radio'){
							$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
								$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).hide();
								$(this).removeClass('is-invalid').addClass('is-valid');
							});
						}else{
							$(element).closest('.form-control').removeClass('is-invalid').addClass('is-valid');
						}
					},
					submitHandler: function(form_2) {
						var formData = new FormData(form_2);
						// NEXT STEP TO TAB 3
						next_step('3');
					}
				});
			} else if (agunanCondition.includes(&quot;TanpaAgunan&quot;)){
				form_2.validate({
					errorElement: 'div',
					errorClass: 'invalid-feedback',
					ignore: &quot;&quot;,
					focusInvalid: false,
					rules: {
						//######## SET VALIDATION FORM ID IN FORM (EDIT BELOW)########
						namaUsaha: {
							required: !0
						},
						lamaUsaha: {
							required: !0
						},
						alamatUsaha: {
							required: !0
						},
						provinsi: {
							required: !0
						},
						kabupaten: {
							required: !0
						},
						kecamatan: {
							required: !0
						},
						cabang: {
							required: !0
						}

						//######## END SET VALIDATION FORM ID IN FORM ########
					},
					invalidHandler: function(event, validator) {
						// App.scrollTo(error, -300);
						if (!validator.numberOfInvalids())
							return;

						$('html, body').animate({
							scrollTop: $(validator.errorList[0].element).offset().top
						}, 500);
					},
					errorPlacement: function(error, element) {
						element.is(&quot;:checkbox&quot;) ? error.insertAfter(element.closest(&quot;.md-checkbox-list, .md-checkbox-inline, .checkbox-list, .checkbox-inline&quot;)) : element.is(&quot;:radio&quot;) ? error.insertAfter(element.closest(&quot;.md-radio-list, .md-radio-inline, .radio-list,.radio-inline&quot;)) : error.insertAfter(element)
					},
					highlight: function(element) {
						if($(element).attr('type') == 'radio'){
							$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
								$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).show();
								$(this).removeClass(&quot;is-valid&quot;).addClass('is-invalid');
							});
						}else{
							$(element).closest('.form-control').removeClass(&quot;is-valid&quot;).addClass('is-invalid');
						}
					},
					success: function(label, element) {
						if($(element).attr('type') == 'radio'){
							$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
								$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).hide();
								$(this).removeClass('is-invalid').addClass('is-valid');
							});
						}else{
							$(element).closest('.form-control').removeClass('is-invalid').addClass('is-valid');
						}
					},
					submitHandler: function(form_2) {
						var formData = new FormData(form_2);
						// NEXT STEP TO TAB 3
						next_step('3');
					}
				});
			}
		}

		// START TAB 3
		var form_3 = $('#formInputTab3');

		$.validator.addMethod(&quot;validateHandphone&quot;, function(value, element) {
			var validate = value.substring(0, 2);
			var pesan='';
			
			if(validate != '08'){
				return false;
			}

		    return true;
		}, &quot;Phone Number must start with 08&quot;);

		form_3.validate({
			errorElement: 'div',
			errorClass: 'invalid-feedback',
			ignore: &quot;&quot;,
			focusInvalid: false,
			rules: {
				//######## SET VALIDATION FORM ID IN FORM (EDIT BELOW)########
				namaCustomer: {
					minlength: 3,
					required: !0
				},
				noKtpCustomer: {
					minlength: 16,
					maxlength: 16,
					required: !0,
					number: true
				},
				PengajuanTanggalLahir: {
					required: !0
				},
				noHpCustomer: {
					required: !0,
					number: true,
					maxlength: 15,
					validateHandphone: true
				}

				//######## END SET VALIDATION FORM ID IN FORM ########
			},
			invalidHandler: function(event, validator) {
				// App.scrollTo(error, -300);
				if (!validator.numberOfInvalids())
					return;

				$('html, body').animate({
					scrollTop: $(validator.errorList[0].element).offset().top
				}, 500);
			},
			errorPlacement: function(error, element) {
				element.is(&quot;:checkbox&quot;) ? error.insertAfter(element.closest(&quot;.md-checkbox-list, .md-checkbox-inline, .checkbox-list, .checkbox-inline&quot;)) : element.is(&quot;:radio&quot;) ? error.insertAfter(element.closest(&quot;.md-radio-list, .md-radio-inline, .radio-list,.radio-inline&quot;)) : error.insertAfter(element)
			},
			highlight: function(element) {
				if($(element).attr('type') == 'radio'){
					$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
						$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).show();
						$(this).removeClass(&quot;is-valid&quot;).addClass('is-invalid');
					});
				}else{
					$(element).closest('.form-control').removeClass(&quot;is-valid&quot;).addClass('is-invalid');
				}
			},
			success: function(label, element) {
				if($(element).attr('type') == 'radio'){
					$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
						$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).hide();
						$(this).removeClass('is-invalid').addClass('is-valid');
					});
				}else{
					$(element).closest('.form-control').removeClass('is-invalid').addClass('is-valid');
				}
			},
			submitHandler: function(form_3) {
				var formData = new FormData(form_3);
				// NEXT STEP TO TAB 4
				next_step('4');
			}
		});
		// END TAB 3
		// START TAB 4
		var form_4 = $('#formInputTab4');
		form_4.validate({
			errorElement: 'div',
			errorClass: 'invalid-feedback',
			ignore: &quot;&quot;,
			focusInvalid: false,
			rules: {
				//######## SET VALIDATION FORM ID IN FORM (EDIT BELOW)########
				agree: {
					required: true
				}

				//######## END SET VALIDATION FORM ID IN FORM ########
			},
			invalidHandler: function(event, validator) {
				// App.scrollTo(error, -300);
				if (!validator.numberOfInvalids())
					return;

				$('html, body').animate({
					scrollTop: $(validator.errorList[0].element).offset().top
				}, 500);
			},
			errorPlacement: function(error, element) {
				element.is(&quot;:checkbox&quot;) ? error.insertAfter(element.closest(&quot;.md-checkbox-list, .md-checkbox-inline, .checkbox-list, .checkbox-inline&quot;)) : element.is(&quot;:radio&quot;) ? error.insertAfter(element.closest(&quot;.md-radio-list, .md-radio-inline, .radio-list,.radio-inline&quot;)) : error.insertAfter(element)
			},
			highlight: function(element) {
				if($(element).attr('type') == 'radio'){
					$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
						$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).show();
						$(this).removeClass(&quot;is-valid&quot;).addClass('is-invalid');
					});
				}else{
					$(element).closest('.form-control').removeClass(&quot;is-valid&quot;).addClass('is-invalid');
				}
			},
			success: function(label, element) {
				if($(element).attr('type') == 'radio'){
					$(element.form).find(&quot;input[type=radio]&quot;).each(function(which){
						$(element.form).find(&quot;label[for=&quot; + this.name + &quot;]&quot;).hide();
						$(this).removeClass('is-invalid').addClass('is-valid');
					});
				}else{
					$(element).closest('.form-control').removeClass('is-invalid').addClass('is-valid');
				}
			},
			submitHandler: function(form_4) {
				var formData = new FormData(form_4);
				// NEXT STEP TO SIMPAN DATA
				simpanPengajuan();
			}
		});
		// END TAB 4
		//========== END VALIDASI FORM AND NEXT STEP =============================//


		//===========================TAMBAHAN VALIDASI =======================================//
		$('input:checkbox[name=&quot;agree&quot;]').change(function() {
			$('#btnAjukanPembiayaan').prop('disabled', true);

			if ($(this).is(':checked')) {
				$('#btnAjukanPembiayaan').prop('disabled', false);
			}
		});
		//===========================END VALIDASI =======================================//

		$(&quot;input[data-type='number']&quot;).keyup(function(event) {
			// skip for arrow keys
			if (event.which >= 37 &amp;&amp; event.which &lt;= 40) {
				event.preventDefault();
			}
			var $this = $(this);
			var num = $this.val().replace(/,/gi, &quot;&quot;);
			var num2 = num.split(/(?=(?:\d{3})+$)/).join(&quot;,&quot;);
			// the following line has been simplified. Revision history contains original.
			$this.val(num2);
		});	
		
		$('#jumlah-pinjaman').change(function(){
			var hk_chng = $(this).val();

			var hkParse_chng = hk_chng.replace(/,/g, &quot;&quot;);
			var jumlahPinjaman_chng = parseFloat(hkParse_chng);

			if(produkCode != null &amp;&amp; jumlahPinjaman_chng > 0){
				set_tenor();
			}
		});
	});		

	function numberWithDot(nStr) {
		return nStr.toString().replace(/\B(?=(?:\d{3})+(?!\d))/g, &quot;,&quot;);
	}

	$(&quot;.input&quot;).on('input', function() {
		var tarif_per_bulan;

		if (document.getElementById('ya-usaha').checked) {
			status_usaha = document.getElementById('ya-usaha').value;
		}
		if (document.getElementById('tidak-usaha').checked) {
			status_usaha = document.getElementById('tidak-usaha').value;
		}

		agunan = document.getElementById('jenis-agunan').value;
    	var val = agunan.split(&quot; &quot;);
		jenis_agunan = val[0];
		jenis_kendaraan = val[1];

		var jp = document.getElementById('jumlah-pinjaman').value;
		jpParse = jp.replace(/,/g, &quot;&quot;);
		jumlahPinjaman = parseFloat(jpParse);

		if (Number.isNaN(tahunPembuatan)) {
			tahunPembuatan = 0;
		}

		var tp = document.getElementById('tahun-pembuatan').value;
		tahunPembuatan = parseInt(tp);

		if (Number.isNaN(tenor)) {
			tenor = 1;
		}

		tenor = document.getElementById('tenor').value;

		no_sertifikat = document.getElementById('noSertifikat').value;
		nama_usaha = document.getElementById('namaUsaha').value;
		lama_usaha = document.getElementById('lamaUsaha').value;
    	alamat_usaha = document.getElementById('alamatUsaha').value;
    	tipeKendaraan = document.getElementById('tipeKendaraan').value;
    	merkKendaraan = document.getElementById('merkKendaraan').value;
    
		var tglLahir = document.getElementById('PengajuanTanggalLahir').value;
		var datacabang = document.getElementById('cabang').value;
		var splitCabang = datacabang.split(&quot;|&quot;);
		kodeCabang = splitCabang[0];
		var namaCabang = splitCabang[1];

		namaCustomer = document.getElementById('namaCustomer').value;
		noKtpCustomer = document.getElementById('noKtpCustomer').value;
		ttlCustomer = document.getElementById('PengajuanTanggalLahir').value;
		noHpCustomer = document.getElementById('noHpCustomer').value;
		emailCustomer = document.getElementById('emailCustomer').value;   

	  	if (status_usaha == &quot;Ada&quot;) {
    		if (jenis_agunan == &quot;BPKB&quot;) {
				//Penentuan produk dan tarif per bulan
				if (jumlahPinjaman >= 1000000 &amp;&amp; jumlahPinjaman &lt;= 10000000) {
					produkCode = &quot;07&quot;;
					tarif_per_bulan = 1.25 / 100;                      
      			}else if(jumlahPinjaman > 10000000 &amp;&amp; jumlahPinjaman &lt;= 50000000) {
					produkCode = &quot;03&quot;;
					tarif_per_bulan = 1.15 / 100;
      			}else if(jumlahPinjaman > 50000000 &amp;&amp; jumlahPinjaman &lt;= 100000000) {
					produkCode = &quot;03&quot;;
					tarif_per_bulan = 1.05 / 100;
      			}else if (jumlahPinjaman > 100000000 &amp;&amp; jumlahPinjaman &lt;= 400000000 ) {
					produkCode = &quot;03&quot;;
					tarif_per_bulan = 1.00 / 100;
				}
    		} else if (jenis_agunan == &quot;TanpaAgunan&quot;) {
				produkCode = &quot;47&quot;;
				if (jumlahPinjaman >= 1000000 &amp;&amp; jumlahPinjaman &lt;= 2000000 ) {
					if(tenor == 1){
						tarif_per_bulan = 2.50 / 100;
					}else if(tenor == 2){
						tarif_per_bulan = 1.90 / 100;
					}else if(tenor == 3){
						tarif_per_bulan = 1.70 / 100;
					}else if(tenor == 4){
						tarif_per_bulan = 1.60 / 100;
					}else if(tenor == 5){
						tarif_per_bulan = 1.50 / 100;
					}else{
						tarif_per_bulan = 1.40 / 100;
					}
      			}
     		} else if (jenis_agunan == &quot;SHM&quot;) {
				produkCode = &quot;18&quot;;
				if (jumlahPinjaman >= 1000000 &amp;&amp; jumlahPinjaman &lt;= 200000000 ) {
        			tarif_per_bulan = 1.00 / 100;
      			}
    		} else {
				produkCode = &quot;Tidak ada&quot;;
			}

    	} else {
    		if (jenis_agunan == &quot;BPKB&quot;) {
				//Penentuan produk
				produkCode = &quot;77&quot;; 
      			if (jumlahPinjaman >= 1000000 &amp;&amp; jumlahPinjaman &lt;= 10000000 ) {
        			tarif_per_bulan = 1.50 /100;
      			}else if(jumlahPinjaman > 10000000 &amp;&amp; jumlahPinjaman &lt;= 50000000){
					tarif_per_bulan = 1.25 /100;
				}else if(jumlahPinjaman > 50000000 &amp;&amp; jumlahPinjaman &lt;= 100000000){
					tarif_per_bulan = 1.15 /100;
				}
			} else if (jenis_agunan == &quot;SHM&quot;) {
				produkCode = &quot;18&quot;;
				if (jumlahPinjaman >= 1000000 &amp;&amp; jumlahPinjaman &lt;= 200000000 ) {
					tarif_per_bulan = 1.00 / 100;
				}
			} else {
				produkCode = &quot;Tidak ada&quot;;
			}
		}

		uang_pokok = jumlahPinjaman / tenor;
		sewa_modal = jumlahPinjaman * tarif_per_bulan;
		angsuran = uang_pokok + sewa_modal;

		if (Number.isNaN(jumlahPinjaman)) {
			jumlahPinjaman = 0;
		}
		if (Number.isNaN(uang_pokok)) {
			uang_pokok = 0;
		}
		if (Number.isNaN(sewa_modal)) {
			sewa_modal = 0;
		}
		if (Number.isNaN(angsuran)) {
			angsuran = 0;
		}
		if(angsuran === Infinity){
			angsuran = 0;
		}

		document.getElementById('angsuranPerBulan').textContent = &quot;Rp &quot; + numberWithDot(Math.round(angsuran));
		document.getElementById('rincianUangPokok').textContent = &quot;Rp &quot; + numberWithDot(Math.round(uang_pokok));
		document.getElementById('rincianSewaModal').textContent = &quot;Rp &quot; + numberWithDot(Math.round(sewa_modal));
		document.getElementById('ringkasanJenisAgunan').textContent = jenis_agunan;
		document.getElementById('ringkasanJumlahPinjaman').textContent = &quot;Rp &quot; + numberWithDot(Math.round(jumlahPinjaman));
		document.getElementById('ringkasanTenor').textContent = tenor;
		document.getElementById('ringkasanAngsuranPerBulan').textContent = &quot;Rp &quot; + numberWithDot(Math.round(angsuran));
		document.getElementById('ringkasanCabang').textContent = namaCabang;
		document.getElementById('ringkasanNama').textContent = namaCustomer;
		document.getElementById('ringkasanNoHp').textContent = noHpCustomer;
		document.getElementById('ringkasanEmail').textContent = emailCustomer;
		document.getElementById('step5JenisAgunan').textContent = jenis_agunan;
		document.getElementById('step5JumlahPinjaman').textContent = &quot;Rp &quot; + numberWithDot(Math.round(jumlahPinjaman));
		document.getElementById('step5Tenor').textContent = tenor;
		document.getElementById('step5AngsuranPerBulan').textContent = &quot;Rp &quot; + numberWithDot(Math.round(angsuran));
		document.getElementById('step5Cabang').textContent = namaCabang;
	});

	simpanPengajuan = function(){
		$('#btnAjukanPembiayaan').prop('disabled', true);
		$.ajax({
			url : 'http://10.251.4.67/microsite/pengajuan/Pembiayaan/save_data',
			data : {
				no_ktp: noKtpCustomer,
				nama: namaCustomer,
				tgl_lahir: ttlCustomer,
				no_hp: noHpCustomer,
				email: emailCustomer,
				kode_produk: produkCode,
				status_usaha: status_usaha,
				jenis_agunan: jenis_agunan,
				jenis_kendaraan: jenis_kendaraan,
				tahun_produksi: tahunPembuatan,
				tipe_kendaraan: tipeKendaraan,
				merk_kendaraan: merkKendaraan,
				no_sertifikat: no_sertifikat,
				jumlah_pinjaman: jumlahPinjaman,
				angsuran: angsuran,
				jenis_agunan: jenis_agunan,
				tenor: tenor,
				kode_cabang : kodeCabang,
				nama_usaha: nama_usaha,
				lama_usaha: lama_usaha,
				alamat_usaha: alamat_usaha,
				sewa_modal: sewa_modal,
				uang_pokok: uang_pokok
			},
			type : 'POST',
			dataType : 'json',
			success : function(response){
				if(response.status == 'success'){
					document.getElementById('step5Pengajuan').textContent = response.data;
					next_step('5');					
				} else {
					alert(response.message);
					return;
					//handle untukk error submit masih gagal
				}
			}
		});
	}

	

    
        
            
                
                    Copyright Â© 2020 PT. Pegadaian - Persero. All Rights Reserved.
                
            
        
    

    
    
    
    


/html[1]/div[@class=&quot;blockUI blockOverlay&quot;]</value>
   </webElementProperties>
   <webElementProperties>
      <isSelected>false</isSelected>
      <matchCondition>equals</matchCondition>
      <name>xpath</name>
      <type>Main</type>
      <value>/html[1]</value>
   </webElementProperties>
   <webElementXpaths>
      <isSelected>true</isSelected>
      <matchCondition>equals</matchCondition>
      <name>xpath:neighbor</name>
      <type>Main</type>
      <value>//*/text()[normalize-space(.)='']/parent::*</value>
   </webElementXpaths>
   <webElementXpaths>
      <isSelected>false</isSelected>
      <matchCondition>equals</matchCondition>
      <name>xpath:position</name>
      <type>Main</type>
      <value>//html</value>
   </webElementXpaths>
</WebElementEntity>
